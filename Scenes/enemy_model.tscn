[gd_scene load_steps=10 format=3 uid="uid://cfx0dwkmulm7a"]

[ext_resource type="Script" uid="uid://dbaj3ji123evv" path="res://Scripts/enemy_model.gd" id="1_cwoyp"]
[ext_resource type="PackedScene" uid="uid://ctb84yfllt3jf" path="res://robot_v3.glb" id="2_cwoyp"]
[ext_resource type="Script" uid="uid://g2fwgicetq1f" path="res://Scripts/gun.gd" id="3_kbb0h"]

[sub_resource type="SphereMesh" id="SphereMesh_cwoyp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cwoyp"]
albedo_color = Color(0.47000003, 1, 0.6908334, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_gy5hj"]
albedo_color = Color(0.47000003, 0.6908334, 1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4uij5"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_1mooe"]
material = SubResource("StandardMaterial3D_4uij5")
height = 11.524

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kbb0h"]
albedo_color = Color(0.94750005, 1, 0.37, 1)

[node name="Root" type="Node3D"]
script = ExtResource("1_cwoyp")

[node name="robot" parent="." instance=ExtResource("2_cwoyp")]
transform = Transform3D(0.33, 0, 0, 0, 0.33, 0, 0, 0, 0.33, 0, 0, 0)

[node name="Skeleton3D" parent="robot/Armature" index="0"]
bones/1/rotation = Quaternion(0.706, -0.014, 0.01, 0.708)
bones/12/rotation = Quaternion(-0.045, 0.691, -0.685, 0.225)

[node name="hand_L" parent="robot/Armature/Skeleton3D" index="0"]
transform = Transform3D(-0.6017817, -0.7965882, -0.057490095, 0.79723376, -0.5948482, -0.10282534, 0.04771149, -0.107711494, 0.9930366, -3.9104176, -0.21333623, 0.3863061)
visible = false

[node name="forearm_L" parent="robot/Armature/Skeleton3D" index="1"]
transform = Transform3D(-0.6531424, -0.75662965, -0.030261591, 0.7560887, -0.6494352, -0.081012376, 0.041643336, -0.07579307, 0.99625355, -2.6222115, 0.8923651, 0.5153482)

[node name="upperarm_L" parent="robot/Armature/Skeleton3D" index="2"]
transform = Transform3D(-0.55146706, -0.83145684, 0.06754874, 0.8192529, -0.555068, -0.1439565, 0.15718774, -0.02404777, 0.98727584, -1.2977501, 1.7765545, 0.5536548)

[node name="head_2" parent="robot/Armature/Skeleton3D" index="3"]
transform = Transform3D(0.99948186, -0.008556725, -0.031022822, 0.008548757, 0.99996316, -0.00038933265, 0.031025015, 0.0001238794, 0.9995185, -0.07197509, 2.2193403, 0.48869157)

[node name="hand_R" parent="robot/Armature/Skeleton3D" index="4"]
transform = Transform3D(-0.54287696, 0.7873943, 0.29205236, -0.8394145, -0.49805012, -0.21755366, -0.025843795, -0.36325783, 0.9313301, 3.872326, -0.11936128, -0.0074255466)
visible = false

[node name="forearm_R" parent="robot/Armature/Skeleton3D" index="5"]
transform = Transform3D(-0.5923741, 0.7762217, 0.21580695, -0.8056424, -0.56880546, -0.16553143, -0.0057369024, -0.27191976, 0.9623028, 2.5507638, 0.84906256, 0.45553344)

[node name="upperarm_R" parent="robot/Armature/Skeleton3D" index="6"]
transform = Transform3D(-0.5772478, 0.80400234, 0.14270642, -0.803913, -0.5902052, 0.07336067, 0.14320822, -0.072376266, 0.98704255, 1.2700368, 1.7892239, 0.5708245)

[node name="upperspine" parent="robot/Armature/Skeleton3D" index="7"]
transform = Transform3D(0.9994079, -0.033928137, -0.0057040188, 0.033944134, 0.9994199, 0.0027320953, 0.005608014, -0.0029241412, 0.99998, -0.018380538, 0.6406081, 0.4933107)

[node name="spine" parent="robot/Armature/Skeleton3D" index="8"]
transform = Transform3D(0.99940795, -0.033928137, -0.005704025, 0.033944134, 0.99942, 0.0027320385, 0.0056080217, -0.0029240847, 0.99998003, 0.03521402, -0.9381242, 0.49792972)

[node name="foot_L" parent="robot/Armature/Skeleton3D" index="9"]
transform = Transform3D(0.9171536, -0.030551717, -0.39736083, 0.39469507, -0.0684174, 0.916261, -0.05517973, -0.99718904, -0.050690595, -0.44618562, -4.3443384, 0.44400305)

[node name="LeftIK" type="SkeletonIK3D" parent="robot/Armature/Skeleton3D" index="16"]
transform = Transform3D(0.37500006, 0, -7.1054274e-15, 0, 0.37500006, 0, 7.1054274e-15, 0, 0.37500006, 0, 0, 0)
root_bone = &"thigh.L"
tip_bone = &"foot.L"
use_magnet = true
magnet = Vector3(-1.77, -2.335, -3.32)
target_node = NodePath("../../../../LeftFoot")

[node name="LeftHandIK" type="SkeletonIK3D" parent="robot/Armature/Skeleton3D" index="17"]
root_bone = &"upperarm.L"
tip_bone = &"hand.L"
use_magnet = true
magnet = Vector3(-1.52, 0, 2.4)
target_node = NodePath("../../../../LeftHandTarget")

[node name="RightHandIK" type="SkeletonIK3D" parent="robot/Armature/Skeleton3D" index="18"]
transform = Transform3D(0.37500006, 0, -2.842171e-14, 0, 0.37500006, 0, 2.842171e-14, 0, 0.37500006, 0, 0, 0)
root_bone = &"upperarm.R"
tip_bone = &"hand.R"
override_tip_basis = false
use_magnet = true
magnet = Vector3(1.68, 0, 2.41)
target_node = NodePath("../../../../RightHandTarget")

[node name="RightIK" type="SkeletonIK3D" parent="robot/Armature/Skeleton3D" index="19"]
transform = Transform3D(0.375, 0, 0, 0, 0.375, 0, 0, 0, 0.375, 0, 0, 0)
root_bone = &"thigh.R"
tip_bone = &"foot.R"
use_magnet = true
magnet = Vector3(0.67, 2, -2)
target_node = NodePath("../../../../RightFoot")

[node name="UpperIK" type="SkeletonIK3D" parent="robot/Armature/Skeleton3D" index="20"]
transform = Transform3D(0.37500006, 0, 0, 0, 0.37500006, 0, 0, 0, 0.37500006, 0, 0, 0)
influence = 0.271
root_bone = &"spine"
tip_bone = &"head_2"
magnet = Vector3(0, 1.5, 1.39)
target_node = NodePath("../../../../TorsoTarget")

[node name="LeftFoot" type="Node3D" parent="."]
transform = Transform3D(0.9999999, 0, 0, 0, 0.9999999, 0, 0, 0, 0.9999999, -0.20002031, 0, 0)
top_level = true

[node name="RightFoot" type="Node3D" parent="."]
top_level = true

[node name="FootTracker" type="Node3D" parent="."]
transform = Transform3D(0.4, 0, 0, 0, 1, 0, 0, 0, 0.4, 0, 0, 0)

[node name="Holder" type="Node3D" parent="FootTracker"]

[node name="LeftFootTrack" type="Node3D" parent="FootTracker/Holder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.67609996, 0, 0)

[node name="Tip" type="Node3D" parent="FootTracker/Holder/LeftFootTrack"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)

[node name="MeshInstance3D" type="MeshInstance3D" parent="FootTracker/Holder/LeftFootTrack/Tip"]
transform = Transform3D(0.39313042, 0, 0, 0, 0.39313042, 0, 0, 0, 0.39313042, 0, 0, 0)
mesh = SubResource("SphereMesh_cwoyp")
surface_material_override/0 = SubResource("StandardMaterial3D_cwoyp")

[node name="RightFootTrack" type="Node3D" parent="FootTracker/Holder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.68333846, 0, 0)

[node name="Tip" type="Node3D" parent="FootTracker/Holder/RightFootTrack"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1)

[node name="MeshInstance3D" type="MeshInstance3D" parent="FootTracker/Holder/RightFootTrack/Tip"]
transform = Transform3D(0.39313042, 0, 0, 0, 0.39313042, 0, 0, 0, 0.39313042, 0, 0, 0)
mesh = SubResource("SphereMesh_cwoyp")
surface_material_override/0 = SubResource("StandardMaterial3D_gy5hj")

[node name="LeftHandTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.44511867, 0.83202815, -0.21669531)

[node name="RightHandTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.99999994, 0, 0, 0, 0.99999994, 0.41868997, 1.5888447, -0.4222384)

[node name="GunHolder" type="Node3D" parent="RightHandTarget"]

[node name="Gun" type="Node3D" parent="RightHandTarget/GunHolder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.4901161e-08, -0.84131336)
script = ExtResource("3_kbb0h")

[node name="MeshInstance3D" type="MeshInstance3D" parent="RightHandTarget/GunHolder/Gun"]
transform = Transform3D(0.14, 0, 0, 0, -6.119594e-09, 0.14, 0, -0.14, -6.119594e-09, 0, 0, 0)
mesh = SubResource("CylinderMesh_1mooe")

[node name="TorsoTarget" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.21185303, 1.6420898, -0.5572586)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="TorsoTarget"]
transform = Transform3D(0.313, 0, 0, 0, 0.313, 0, 0, 0, 0.313, 0, 0, 0)
mesh = SubResource("SphereMesh_cwoyp")
skeleton = NodePath("../../Tip")
surface_material_override/0 = SubResource("StandardMaterial3D_kbb0h")

[node name="Reset" type="Timer" parent="."]
process_callback = 0
autostart = true

[node name="Step" type="Timer" parent="."]
wait_time = 0.1
one_shot = true

[connection signal="timeout" from="Reset" to="." method="make_step"]
[connection signal="timeout" from="Step" to="." method="make_step"]

[editable path="robot"]
